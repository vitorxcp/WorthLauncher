<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>...</title>
    <style>
        body { margin: 0; overflow: hidden; background: #87ceeb; font-family: 'Times New Roman', serif; transition: background 5s; cursor: crosshair; }
        #game-container { position: relative; width: 1000000px; height: 100vh; }
        
        #pato { 
            position: absolute; bottom: 150px; left: 50px; font-size: 70px; 
            transition: filter 1s, opacity 1s; user-select: none; z-index: 5;
        }

        .walking { animation: waddle 0.2s infinite alternate; }
        @keyframes waddle { from { transform: rotate(-10deg); } to { transform: rotate(10deg); } }

        /* Estado de Felicidade Incr√≠vel */
        .joy { animation: joy-pulse 0.5s infinite; filter: saturate(5) drop-shadow(0 0 20px gold) !important; }
        @keyframes joy-pulse { 
            0% { transform: scale(1.5) rotate(5deg); } 
            50% { transform: scale(1.8) rotate(-5deg); } 
            100% { transform: scale(1.5) rotate(5deg); } 
        }

        #bola { 
            position: absolute; bottom: 160px; width: 45px; height: 45px; 
            background: #fff300; border-radius: 50%; cursor: pointer; 
            display: none; box-shadow: 0 0 40px #fff300; z-index: 6;
        }

        /* Mensagens */
        .vicio-msg {
            position: fixed; color: white; font-size: 2.5rem; pointer-events: none; 
            z-index: 15; text-transform: uppercase; font-weight: bold; font-style: italic;
            animation: floatingMsg 3s forwards; text-shadow: 2px 2px 10px red;
        }
        @keyframes floatingMsg { 0% { opacity: 0; transform: scale(0.5); } 20% { opacity: 1; } 100% { opacity: 0; transform: scale(1.2) translateY(-100px); } }

        #ui-layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 20; }
        #menu { pointer-events: all; text-align: center; background: rgba(255,255,255,0.1); padding: 50px; border-radius: 20px; }
        
        /* Bordas de Sangue (Vignette) */
        #vignette { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            box-shadow: inset 0 0 0px rgba(139, 0, 0, 0); 
            pointer-events: none; z-index: 10; transition: box-shadow 2s; 
        }
        
        h1 { font-size: 4rem; letter-spacing: 20px; color: #222; }
        button { padding: 15px 60px; font-size: 1.5rem; cursor: pointer; background: #333; color: white; border: none; }
        
        #final { display: none; color: white; text-align: center; pointer-events: all; }
    </style>
</head>
<body>

    <div id="vignette"></div>
    <div id="ui-layer">
        <div id="menu">
            <h1>O VAZIO</h1>
            <button onclick="startGame()">INICIAR</button>
        </div>
        <div id="final">
            <h1 style="color: #ff0000; font-size: 4rem;">Tudo em excesso, mata.</h1>
            <button onclick="location.reload()" style="background: red;">Recome√ßar</button>
        </div>
    </div>

    <div id="game-container">
        <div id="pato">ü¶Ü</div>
        <div id="bola"></div>
    </div>

<script>
    let pos = 50;
    let balls = 0;
    let isPlaying = false;
    let isDead = false;
    let speed = 15;
    let keys = {};
    const frases = ["Muito bom", "S√≥ mais um pouco", "S√≥ mais uma", "A √∫ltima...", "√â bom demais..."];

    const pato = document.getElementById('pato');
    const bola = document.getElementById('bola');
    const vignette = document.getElementById('vignette');

    // --- SISTEMA DE √ÅUDIO ---
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    let musicOsc, musicGain;

    function setupMusic() {
        musicOsc = audioCtx.createOscillator();
        musicGain = audioCtx.createGain();
        musicOsc.type = 'triangle';
        musicOsc.frequency.setValueAtTime(110, audioCtx.currentTime); // Nota grave LA
        musicGain.gain.setValueAtTime(0.05, audioCtx.currentTime);
        musicOsc.connect(musicGain);
        musicGain.connect(audioCtx.destination);
        musicOsc.start();
    }

    function updateMusic() {
        if(isDead) return;
        // A m√∫sica fica mais inst√°vel e grave
        let freq = 110 - (balls * 4);
        musicOsc.frequency.setTargetAtTime(freq, audioCtx.currentTime, 1);
        musicGain.gain.setTargetAtTime(0.05 + (balls * 0.01), audioCtx.currentTime, 1);
        if(balls > 7) musicOsc.type = 'sawtooth';
    }

    function playJoySound() {
        const osc = audioCtx.createOscillator();
        const g = audioCtx.createGain();
        osc.frequency.setValueAtTime(440 + (balls * 50), audioCtx.currentTime);
        osc.type = 'sine';
        osc.connect(g);
        g.connect(audioCtx.destination);
        osc.start();
        g.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + 1.5);
        osc.stop(audioCtx.currentTime + 1.5);
    }

    // --- L√ìGICA DO JOGO ---
    function startGame() {
        document.getElementById('menu').style.display = 'none';
        isPlaying = true;
        audioCtx.resume();
        setupMusic();
        spawnBall();
        update();
    }

    function spawnBall() {
        if(isDead) return;
        let gap = 1200 + (balls * 100); 
        bola.style.left = (pos + gap) + 'px';
        bola.style.display = 'block';
    }

    function update() {
        if(isPlaying && !isDead) {
            if(keys['d'] || keys['ArrowRight']) {
                pos += speed;
                pato.style.left = pos + 'px';
                pato.classList.add('walking');
                window.scrollTo(pos - window.innerWidth/2, 0);
            } else {
                pato.classList.remove('walking');
            }
        }
        requestAnimationFrame(update);
    }

    window.addEventListener('keydown', (e) => keys[e.key] = true);
    window.addEventListener('keyup', (e) => keys[e.key] = false);

    bola.addEventListener('click', () => {
        balls++;
        bola.style.display = 'none';
        
        playJoySound();
        updateMusic();

        // Anima√ß√£o de Felicidade Incr√≠vel (Dura 3 segundos)
        pato.classList.add('joy');
        if(balls >= 4) spawnMessage();

        setTimeout(() => {
            pato.classList.remove('joy');
            
            // Progress√£o Lenta
            speed = Math.max(8, 15 - (balls * 0.5)); 
            
            // O pato fica escuro
            let bnt = Math.max(0, 100 - (balls * 8));
            pato.style.filter = `brightness(${bnt}%)`;
            
            // Sangue nas bordas (Vermelho)
            let bloodIntensity = balls * 40;
            let bloodOpacity = balls * 0.08;
            vignette.style.boxShadow = `inset 0 0 ${bloodIntensity}px rgba(139, 0, 0, ${bloodOpacity})`;

            // Escurecimento do c√©u mais lento
            let bgVal = Math.max(0, 135 - (balls * 10));
            document.body.style.background = `rgb(${bgVal/4}, ${bgVal/2}, ${bgVal})`;

            if(balls >= 15) { 
                die();
            } else {
                spawnBall();
            }
        }, 2000); // 2 segundos de "brilho/felicidade"
    });

    function spawnMessage() {
        const m = document.createElement('div');
        m.className = 'vicio-msg';
        m.innerText = frases[Math.floor(Math.random() * frases.length)];
        m.style.left = '50%';
        m.style.top = '40%';
        m.style.transform = 'translateX(-50%)';
        document.body.appendChild(m);
        setTimeout(() => m.remove(), 3000);
    }

    function die() {
        isDead = true;
        musicOsc.stop();
        pato.style.transform = 'rotate(90deg)';
        document.body.style.background = 'black';
        vignette.style.boxShadow = `inset 0 0 1000px rgba(0,0,0,1)`;
        
        setTimeout(() => {
            document.getElementById('final').style.display = 'block';
            window.scrollTo(0,0);
        }, 2000);
    }
</script>
</body>
</html>